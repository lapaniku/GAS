# This program was generated by "Generative Art Synthesizer" 
# Generation date: 2021-11-28 04:09:37 UTC 
# GAS change date: 2021-11-28 03:58:45 UTC 
# GAS md5 hash: fa4b9db8bcdb760d7fde2be64723fca2 
# Python version: 3.7.9 (tags/v3.7.9:13c94747c7, Aug 17 2020, 18:58:18) [MSC v.1900 64 bit (AMD64)] 
# For more information visit: https://github.com/volotat/GAS

#import python libraries 
import os #OS version: default 
import numpy as np #Numpy version: 1.19.5 
from PIL import Image #PIL version: 8.1.2 

#set initial params
SIZE = 768 
GRID_CHANNELS = 16 

def test_values(arr):
    if np.isnan(arr).any():
        raise Exception('Array has None elements!') 
        
    if np.amin(arr) < -1 or np.amax(arr) > 1:
        raise Exception('Values went to far! [ %.2f : %.2f ]'%(np.amin(arr), np.amax(arr)) ) 
           
    return arr

#define grid transformation methods

def transit(x, t_indx, s_indx, alphas):
    res = x.copy()
    res[:,:,t_indx] = np.sum(x[:,:,s_indx] * alphas, axis = -1)
    return test_values(res.clip(-1,1)) 

def sin(x, t_indx, s_indx, scale = 1, shift = 0): 
    res = x.copy()
    res[:,:,t_indx] = np.sin(x[:,:,s_indx] * 0.5 * np.pi * scale + shift)
    return test_values(res)     

def magnitude(x, t_indx, s_indx, ord = 2): 
    res = x.copy()
    res[:,:,t_indx] = np.linalg.norm(x[:,:,s_indx], axis = -1, ord = ord) / np.sqrt(len(s_indx))
    return test_values(res)   

def shift(x, t_indx, s_indx, shift):
    res = x.copy()
    if shift > 0: res[:,:,t_indx] = (-np.abs(((x[:,:,s_indx] + 1) / 2) ** (1 + shift) - 1) ** (1 / (1 + shift)) + 1) * 2 - 1
    if shift < 0: res[:,:,t_indx] = np.abs((1 - (x[:,:,s_indx] + 1) / 2) ** (1 - shift) - 1) ** (1 / (1 - shift)) * 2 - 1  
    return test_values(res) 

#set initial grid
grid = np.zeros((SIZE, SIZE, GRID_CHANNELS))

x = ((np.arange(SIZE)/(SIZE-1) - 0.5) * 2).reshape((1, SIZE)).repeat(SIZE, 0)
y = ((np.arange(SIZE)/(SIZE-1) - 0.5) * 2).reshape((SIZE, 1)).repeat(SIZE, 1)

grid[:,:,0] = (x * 0.880703549247527 + y * 0.11226912666059086) / 2 
grid[:,:,1] = (x * 0.72222465726219 + y * -0.2655218248501834) / 2 
grid[:,:,2] = (x * -0.7041108984829598 + y * -0.12998385826349068) / 2 
grid[:,:,3] = (x * -0.5412708261945978 + y * 0.45155554458906755) / 2 
grid[:,:,4] = (x * -0.735093345757937 + y * 0.2208148166983943) / 2 
grid[:,:,5] = (x * 0.4938229505679772 + y * 0.5264760552251331) / 2 
grid[:,:,6] = (x * -0.8188097413844881 + y * 0.33444456031307057) / 2 
grid[:,:,7] = (x * -0.03917331267793145 + y * -0.21063802048855074) / 2 
grid[:,:,8] = (x * 0.29756740482761224 + y * -0.3730506743077353) / 2 
grid[:,:,9] = (x * -0.6268661645255467 + y * 0.2224235794170064) / 2 
grid[:,:,10] = (x * 0.08733100173782127 + y * 0.7486830681367214) / 2 
grid[:,:,11] = (x * -0.6859393692071114 + y * -0.1927412743289585) / 2 
grid[:,:,12] = (x * 0.052329831084386935 + y * -0.4304374921048626) / 2 
grid[:,:,13] = (x * 0.5776859725339458 + y * 0.13186677598461793) / 2 
grid[:,:,14] = (x * 0.3257911908472251 + y * -0.3741770996527638) / 2 
grid[:,:,15] = (x * -0.010989835106052892 + y * -0.13643427913830553) / 2 

#apply transformations to the grid
grid = shift(grid, 13, 12, 0.4045727846245524)
grid = sin(grid, 11, 4, 0.9075060985779413, 48.10253693605321)
grid = transit(grid, 4, [1, 15, 5, 2, 9, 13, 0], [0.05370224794631401, 0.21397133227430115, 0.3375549613251897, 0.07751569632684119, 0.03501798271598436, 0.22437967324808208, 0.05785810616328756])
grid = transit(grid, 10, [0, 5, 10, 8], [0.07517675781812172, 0.6833959049684463, 0.16061560391250318, 0.08081173330092878])
grid = transit(grid, 9, [15], [1.0])
grid = sin(grid, 6, 3, -2.467079740058216, -54.25541635882733)
grid = transit(grid, 1, [4, 11, 5], [0.0010199061127296359, 0.8601675318875391, 0.1388125619997312])
grid = sin(grid, 3, 13, -2.4463584509797696, 9.91617785215621)
grid = shift(grid, 10, 11, -0.5875482628082206)
grid = transit(grid, 1, [7, 2, 6, 4], [0.5587543622067485, 0.14713609827068802, 0.17781304294369862, 0.11629649657886505])
grid = sin(grid, 15, 14, -3.065299235239031, 12.981181894273618)
grid = sin(grid, 12, 11, 1.1602129817908904, -44.473045421240954)
grid = transit(grid, 15, [6, 13, 12], [0.42301037219759696, 0.29823381821374056, 0.2787558095886625])
grid = transit(grid, 5, [11], [1.0])
grid = transit(grid, 14, [1], [1.0])
grid = sin(grid, 15, 9, 6.107496785782841, 3.567363734480793)
grid = transit(grid, 8, [0, 14, 2, 6], [0.23971377453401077, 0.22810405254353705, 0.201772051660236, 0.33041012126221614])
grid = transit(grid, 1, [14, 11, 2, 7], [0.18069946199038936, 0.2117619018324126, 0.40196824929067565, 0.2055703868865224])
grid = shift(grid, 0, 2, 0.6831787131411833)
grid = shift(grid, 8, 3, -3.842411146295273)
grid = sin(grid, 5, 10, 1.954944490187949, -96.14276497402801)
grid = sin(grid, 9, 0, -1.373938741338193, 35.32096496277177)
grid = transit(grid, 6, [9], [1.0])
grid = sin(grid, 11, 14, -2.419333281287012, -29.53499711875645)
grid = sin(grid, 6, 11, -1.4330491970112915, -51.8232659419118)
grid = transit(grid, 9, [10, 11, 8, 5, 0, 12], [0.136073472500635, 0.04716222826533003, 0.08921457906413062, 0.10595338155702602, 0.3539339234261745, 0.26766241518670375])
grid = sin(grid, 3, 1, -2.818078208776297, -36.71178090727465)
grid = transit(grid, 11, [9], [1.0])
grid = sin(grid, 6, 8, -6.767765295672068, -72.7599675668916)
grid = shift(grid, 9, 10, -2.1173678802336937)
grid = sin(grid, 4, 12, -2.4461012769063686, 17.248864545920156)
grid = shift(grid, 4, 2, 0.6069681704348787)
grid = sin(grid, 6, 13, 4.209484837321972, 12.502167592439605)
grid = shift(grid, 2, 9, -3.31546400822878)
grid = transit(grid, 2, [13], [1.0])
grid = sin(grid, 4, 12, 1.6486918943540654, -73.15320210020045)
grid = sin(grid, 1, 6, 1.9319307607477374, 8.081415759709017)
grid = transit(grid, 3, [7, 2, 4], [0.14338893888561466, 0.16736219155835286, 0.6892488695560325])
grid = sin(grid, 10, 6, 0.7449398572990629, -95.79198599308674)
grid = transit(grid, 14, [2, 3, 5], [0.1884724717919949, 0.6427405018131251, 0.16878702639487997])
grid = sin(grid, 13, 13, -2.5270575490907214, -42.40911379830807)
grid = shift(grid, 9, 0, -2.323687270992069)
grid = sin(grid, 2, 8, -1.2217554076786428, -79.97011445131733)
grid = shift(grid, 8, 9, 0.9257577705487434)
grid = transit(grid, 14, [1, 10, 14, 6, 8, 12, 11], [0.10457384653692132, 0.17046411526232946, 0.20097673414641926, 0.17281598372568743, 0.0766000687621522, 0.11757262100231915, 0.15699663056417132])
grid = transit(grid, 3, [0, 14, 12], [0.01689094298769405, 0.2343591983170122, 0.7487498586952938])
grid = magnitude(grid, 2, [15, 8, 5, 10, 6, 11, 13, 4, 14, 9, 0], 2)
grid = magnitude(grid, 5, [8, 5, 10], 2)
grid = transit(grid, 7, [12, 11, 15, 3, 1], [0.1706040219424114, 0.06779494613982316, 0.18318036367449872, 0.36364198974345496, 0.2147786784998119])
grid = sin(grid, 12, 11, 0.5285020834828165, 61.36273083690341)
grid = magnitude(grid, 6, [0], 2)
grid = sin(grid, 14, 3, 1.4997811022335275, 58.14349707786397)
grid = sin(grid, 13, 7, -3.399164127997562, -19.672517685806397)
grid = sin(grid, 15, 15, 1.2387289665321017, 27.943612081077134)
grid = shift(grid, 15, 7, -3.710728652417229)
grid = transit(grid, 4, [4, 0, 3, 9, 7], [0.5361679527521497, 0.02111295326985725, 0.012868635849893444, 0.36976952872012125, 0.060080929407978205])
grid = shift(grid, 0, 13, -0.37049300095142695)
grid = magnitude(grid, 2, [9, 11, 6, 14, 4, 15, 5], 2)
grid = transit(grid, 9, [11, 3, 15, 4], [0.2282059105837712, 0.13586810797692248, 0.269112130738718, 0.3668138507005883])
grid = transit(grid, 0, [4], [1.0])
grid = sin(grid, 2, 5, -0.7279409684330373, -37.06225994981362)
grid = transit(grid, 10, [14, 11, 0, 1, 15, 7, 6, 9], [0.17786393704008105, 0.06302860293273459, 0.24022581868510642, 0.06846853581458119, 0.08613329329595742, 0.09961085641417876, 0.0585726014293584, 0.20609635438800217])
grid = transit(grid, 10, [9], [1.0])
grid = sin(grid, 9, 6, 8.102929193901593, -36.643051289177684)
grid = sin(grid, 1, 14, -2.365103924212311, -73.17663030787858)
grid = sin(grid, 2, 2, 1.2261280456871613, -4.519913138371919)
grid = transit(grid, 6, [2, 3, 6], [0.934905528865338, 0.0541295821137118, 0.01096488902095021])
grid = transit(grid, 12, [12, 4, 2, 6], [0.42401900669930737, 0.2833739233430186, 0.029067575261479784, 0.26353949469619414])
grid = transit(grid, 6, [12, 15, 11, 10, 1, 5], [0.15136672768423895, 0.1887713068959719, 0.058012553821586564, 0.2686100009405377, 0.09906089330562604, 0.23417851735203885])
grid = transit(grid, 9, [13, 6, 12, 14, 11, 15, 10, 4], [0.05576877952378252, 0.31189170830627305, 0.059597919364088876, 0.08283703880318968, 0.20307384516637172, 0.1880770506511924, 0.06469088170144041, 0.03406277648366136])
grid = transit(grid, 12, [0, 9, 5, 6, 11, 1], [0.07963964477668949, 0.08458701391864935, 0.3594587053320302, 0.03430938926944228, 0.14611056127183966, 0.29589468543134895])
grid = transit(grid, 1, [4, 14, 10], [0.30127500594897483, 0.3378428757813772, 0.36088211826964794])
grid = transit(grid, 5, [2, 5, 3, 4, 10, 8, 15], [0.20223926672000514, 0.048537632330807434, 0.20413094296843354, 0.1553143787934316, 0.09797645693490119, 0.13194560180479045, 0.15985572044763066])
grid = transit(grid, 0, [3], [1.0])
grid = transit(grid, 0, [6], [1.0])
grid = transit(grid, 5, [12, 1], [0.573663415615231, 0.42633658438476885])
grid = sin(grid, 10, 15, 2.6236673260323196, 8.507292078840905)
grid = transit(grid, 3, [2, 13, 3, 1], [0.3399173441239701, 0.1359616614732491, 0.23277124436149976, 0.29134975004128105])
grid = transit(grid, 9, [7, 13, 3], [0.054116255565990694, 0.3217299619548907, 0.6241537824791186])
grid = sin(grid, 0, 10, -2.5606261532755616, -85.86130311061564)
grid = transit(grid, 13, [15], [1.0])
grid = sin(grid, 9, 7, 0.46507439874705847, -60.569947980556634)
grid = sin(grid, 3, 2, 8.266021191696606, 79.17603435050862)
grid = sin(grid, 0, 4, 1.2560956861254562, 82.48734755078726)
grid = sin(grid, 6, 15, 2.9297792187044456, 70.0137313133929)
grid = transit(grid, 6, [1], [1.0])
grid = sin(grid, 13, 15, 4.575102453160294, 6.920201839524637)
grid = transit(grid, 14, [5, 8, 15, 6, 11, 0], [0.22780067006419621, 0.1601321841187978, 0.27867031779847556, 0.1332670930614115, 0.023030950174850427, 0.1770987847822685])
grid = sin(grid, 14, 3, -2.9930872804241218, -79.88222474304422)
grid = transit(grid, 11, [12, 7, 15], [0.38679464307454436, 0.4570933390412692, 0.15611201788418633])
grid = sin(grid, 9, 11, -2.169509137344126, 1.7204822412435021)
grid = sin(grid, 4, 6, -2.3914316239777493, -64.24503813514167)
grid = sin(grid, 1, 9, -1.0865785508003218, -49.8053036429585)
grid = transit(grid, 12, [9, 5], [0.695190378841733, 0.30480962115826704])
grid = transit(grid, 7, [15, 11], [0.6292974994132439, 0.3707025005867561])
grid = shift(grid, 1, 4, 1.677555036042155)
grid = transit(grid, 8, [2, 8], [0.35609661887577687, 0.6439033811242232])
grid = sin(grid, 8, 5, -1.1045370509593484, 91.13674535061253)
grid = sin(grid, 2, 4, -4.651329756508084, 27.195989977563542)
grid = transit(grid, 2, [9], [1.0])
grid = transit(grid, 1, [8, 14, 5, 11, 10], [0.0036056097184175196, 0.26843485137220063, 0.13612640835091008, 0.26464934056208983, 0.3271837899963818])
grid = transit(grid, 13, [7, 5, 1, 3], [0.6195656466191442, 0.08455535623028687, 0.03506669441819395, 0.26081230273237493])
grid = sin(grid, 13, 14, -0.943677409208133, -92.57944082061601)
grid = magnitude(grid, 11, [14, 7, 8, 12, 5, 3, 9, 2, 13, 6, 11], 2)
grid = sin(grid, 0, 3, -3.7694589381262453, -92.64806144708102)
grid = transit(grid, 9, [5, 11, 14, 10, 15, 2, 0], [0.2864809773361196, 0.3152671070491731, 0.013532461690342784, 0.13060565078099493, 0.02846280290664508, 0.22038770323098716, 0.005263297005737318])
grid = transit(grid, 8, [13, 1, 4], [0.060726242579363106, 0.41927169928348135, 0.5200020581371556])
grid = transit(grid, 6, [14, 0, 7, 3, 12], [0.29659781376406125, 0.18072399769175265, 0.20119026337730675, 0.13721212712953798, 0.18427579803734132])
grid = sin(grid, 7, 11, 1.7610839276380672, 32.173478472197814)
grid = magnitude(grid, 15, [0, 4, 2, 11, 1, 6, 5], 2)
grid = transit(grid, 7, [1, 4, 15], [0.3450079990977312, 0.48161990655088716, 0.1733720943513817])
grid = transit(grid, 6, [0], [1.0])
grid = magnitude(grid, 2, [5, 6, 7], 2)
grid = sin(grid, 8, 15, -2.2936036860078732, -23.075119803431733)
grid = sin(grid, 4, 10, -0.014352287126650817, 17.901093980222043)
grid = transit(grid, 13, [13, 4], [0.22235491674177973, 0.7776450832582203])
grid = transit(grid, 0, [13, 14, 9, 2], [0.3300830669379811, 0.5208911661142294, 0.021589310728717788, 0.1274364562190717])
grid = transit(grid, 11, [7], [1.0])
grid = sin(grid, 11, 5, 1.4924250552630598, 34.576375408140336)
grid = sin(grid, 2, 15, 0.9001056995485989, -56.0238771397064)
grid = sin(grid, 15, 11, 2.396513843251605, -0.6135271444075414)
grid = shift(grid, 1, 7, -3.981581349030889)
grid = transit(grid, 8, [3, 4, 1, 0, 2, 10, 7, 15, 14, 6, 11], [0.08094575700814126, 0.006669985979154416, 0.11829290434205557, 0.14290315839816176, 0.10977950389980953, 0.10283570313590296, 0.07625041773689309, 0.06108500199329909, 0.007556613873409271, 0.26739925905534706, 0.026281694577825858])
grid = sin(grid, 8, 2, -0.3953402123546056, -78.21814629995238)
grid = shift(grid, 2, 12, 2.9256908872555525)
grid = transit(grid, 9, [8, 6, 15, 2, 4, 9, 3, 5, 11, 13, 14, 10, 0, 12, 7, 1], [0.07479239159175546, 0.025143480551557715, 0.10071307784533971, 0.09050793371189689, 0.06370637427099979, 0.07565208261314132, 0.0600292257725359, 0.0026120570462946193, 0.22817678679604422, 0.024773617651825897, 0.024964125522554455, 0.09002585041377784, 0.0044767793672124715, 0.016729513680344896, 0.07151664345209585, 0.04618005971262284])
grid = magnitude(grid, 0, [13, 9, 2, 1, 5, 3, 11], 2)
grid = transit(grid, 4, [4, 3, 10, 2, 13, 0, 12, 11, 14, 7], [0.12579500133190447, 0.1448541829426306, 0.0755757352916395, 0.10401439991541316, 0.12261343931548446, 0.01876330949745519, 0.03352705000131652, 0.07514184425846966, 0.09280086881030668, 0.20691416863537976])
grid = transit(grid, 13, [5], [1.0])
grid = transit(grid, 15, [1, 7, 9, 10, 3, 14, 6, 13, 8], [0.13619120558118283, 0.003474831952158296, 0.04166027176105831, 0.13563283836809417, 0.2668642392408856, 0.15955409312258237, 0.06286323032903726, 0.03522267225394151, 0.15853661739105956])
grid = transit(grid, 1, [13, 8, 7, 5, 14], [0.14789317815662228, 0.27563568440812725, 0.15971104365401195, 0.3350655198154108, 0.08169457396582785])
grid = transit(grid, 2, [11], [1.0])
grid = transit(grid, 12, [3, 1, 4, 2, 14], [0.3717182370596017, 0.05310998388425516, 0.13055160644256986, 0.24968533079601152, 0.1949348418175617])
grid = sin(grid, 2, 4, -5.698197778539194, -11.306359206327315)
grid = sin(grid, 14, 4, -5.265107359546434, -95.27300187895757)
grid = sin(grid, 9, 9, 7.034687693627124, 85.41486840573378)
grid = sin(grid, 4, 9, 5.911225254257176, -33.560950087554374)
grid = transit(grid, 12, [7, 3, 9, 6, 14, 5, 11, 8, 1, 13, 15, 12, 0, 4, 10, 2], [0.02217282351980389, 0.048577661491812536, 0.07944783296545752, 0.057605178784852405, 0.05115043417016954, 0.022751461905389608, 0.031100472980389322, 0.05783842545671054, 0.05272976684000393, 0.12906556978256925, 0.07014702064208232, 0.08476978484189245, 0.15091190523119283, 0.0448016857804275, 0.04778767258053978, 0.04914230302670646])
grid = transit(grid, 0, [8], [1.0])
grid = transit(grid, 9, [6, 0, 12, 4], [0.09726599672336637, 0.4312764207006278, 0.25686320685779757, 0.21459437571820825])
grid = transit(grid, 15, [1], [1.0])
grid = sin(grid, 8, 9, 2.566846240104397, 22.96097663158845)
grid = transit(grid, 5, [13, 7, 10, 11], [0.14613853006253308, 0.3143444271983619, 0.35435557745814006, 0.18516146528096503])
grid = transit(grid, 3, [15], [1.0])
grid = sin(grid, 15, 12, 0.6382870190616097, 25.870547651929243)
grid = sin(grid, 13, 11, 0.9820052935540515, 30.57423505911379)
grid = transit(grid, 14, [11, 1, 0], [0.006924094387170437, 0.6542176476197824, 0.33885825799304725])
grid = transit(grid, 7, [7, 13, 15], [0.06959228398928544, 0.5296906826035634, 0.4007170334071511])
grid = transit(grid, 8, [8, 4, 0, 12, 7, 14], [0.2281714771429918, 0.24598915467600604, 0.02860266720633082, 0.4218100098899747, 0.013219763509333344, 0.06220692757536336])
grid = sin(grid, 6, 15, 2.596859161415219, -70.78871834954799)
grid = sin(grid, 6, 6, 1.6823912205172569, 81.31933246941023)
grid = sin(grid, 8, 6, -0.4245385905213675, -2.5313341336448616)
grid = sin(grid, 14, 2, -2.0738447943193044, -5.345940741751164)
grid = transit(grid, 8, [3], [1.0])
grid = magnitude(grid, 15, [11], 2)
grid = transit(grid, 11, [11, 13, 2, 6, 3], [0.29345475212279004, 0.1302697941620325, 0.033042813734151834, 0.019047943637312117, 0.5241846963437135])
grid = transit(grid, 11, [3], [1.0])
grid = shift(grid, 11, 12, 3.362951067765744)
grid = sin(grid, 11, 9, 7.143900558131273, -24.000770402452304)
grid = sin(grid, 2, 13, -1.000083976749733, 58.03599950779824)
grid = sin(grid, 15, 8, 3.4044517835736903, -63.36516808694144)
grid = shift(grid, 14, 12, -3.4206993351134347)
grid = sin(grid, 12, 10, -1.5055361700529282, 13.868686271208276)
grid = sin(grid, 1, 13, -0.673686153905948, -20.094950794738736)
grid = magnitude(grid, 11, [8, 13, 15, 6, 7, 11, 2, 10, 5], 2)
grid = transit(grid, 13, [1, 12, 3, 6, 9, 10], [0.0020503773234260346, 0.14575822302067934, 0.27419762027731015, 0.21033002095982942, 0.29912193442151697, 0.06854182399723824])
grid = sin(grid, 5, 8, -1.8932466041324059, 93.73114685012351)
grid = sin(grid, 15, 6, 4.7072717310799925, -44.90301712742202)
grid = magnitude(grid, 14, [6, 8], 2)
grid = shift(grid, 3, 0, 1.7946965281459208)
grid = transit(grid, 11, [4, 13, 1], [0.45757594313323957, 0.2828137542275761, 0.2596103026391845])
grid = transit(grid, 1, [14, 1, 7, 11, 12, 10, 15], [0.10009869309798085, 0.010234816243677398, 0.14417051045245705, 0.24281508592952442, 0.07328851803131534, 0.09064518892483588, 0.338747187320209])
grid = shift(grid, 3, 10, -1.0454375008242347)
grid = transit(grid, 1, [15], [1.0])
grid = sin(grid, 14, 11, -2.0910228696429245, 47.90635541176135)
grid = sin(grid, 14, 11, 1.2704046960728341, 6.859480228989639)
grid = sin(grid, 1, 15, 1.4519963123024275, -87.68929718868964)
grid = sin(grid, 4, 4, -0.9310976892952434, -94.3310806264615)
grid = sin(grid, 4, 4, 0.7722857755647808, 23.636190952189168)
grid = shift(grid, 8, 15, 2.4573170196533978)
grid = shift(grid, 15, 1, 0.2749854463329272)
grid = sin(grid, 14, 4, -3.9696624844285555, 9.61600453014502)
grid = sin(grid, 3, 5, 1.0908898603058697, 98.73073894492785)
grid = transit(grid, 5, [9, 12], [0.8041224197394823, 0.19587758026051763])
grid = sin(grid, 9, 6, -2.4745565606768434, 9.400580603774728)
grid = transit(grid, 4, [1, 11, 6], [0.2839081418067015, 0.6857780272425941, 0.030313830950704404])
grid = shift(grid, 6, 6, 1.9561184286941287)
grid = magnitude(grid, 6, [9, 5, 4], 2)

#create color space 
colors = np.zeros((12, 3)) 
colors[0] = [85, 167, 80] 
colors[1] = [66, 226, 87] 
colors[2] = [112, 152, 217] 
colors[3] = [5, 3, 239] 
colors[4] = [103, 40, 193] 
colors[5] = [15, 145, 136] 
colors[6] = [125, 117, 193] 
colors[7] = [77, 44, 71] 
colors[8] = [229, 7, 192] 
colors[9] = [219, 98, 208] 
colors[10] = [173, 194, 202] 
colors[11] = [252, 128, 239] 

res = np.zeros((SIZE, SIZE, 3))  
res += (grid[:,:,0:0+1].repeat(3, -1) + 1) / 2 * colors[0] 
res += (grid[:,:,1:1+1].repeat(3, -1) + 1) / 2 * colors[1] 
res += (grid[:,:,2:2+1].repeat(3, -1) + 1) / 2 * colors[2] 
res += (grid[:,:,3:3+1].repeat(3, -1) + 1) / 2 * colors[3] 
res += (grid[:,:,4:4+1].repeat(3, -1) + 1) / 2 * colors[4] 
res += (grid[:,:,5:5+1].repeat(3, -1) + 1) / 2 * colors[5] 
res += (grid[:,:,6:6+1].repeat(3, -1) + 1) / 2 * colors[6] 
res += (grid[:,:,7:7+1].repeat(3, -1) + 1) / 2 * colors[7] 
res += (grid[:,:,8:8+1].repeat(3, -1) + 1) / 2 * colors[8] 
res += (grid[:,:,9:9+1].repeat(3, -1) + 1) / 2 * colors[9] 
res += (grid[:,:,10:10+1].repeat(3, -1) + 1) / 2 * colors[10] 
res += (grid[:,:,11:11+1].repeat(3, -1) + 1) / 2 * colors[11] 

res = (res / 12 * 4.44128606984584).clip(0,255) 

#save results 
im = Image.fromarray(np.uint8(res))
im.save(os.path.basename(__file__) + '.png')

#save layers
img = np.zeros((SIZE * 4, SIZE * 4))
for j in range(GRID_CHANNELS):
    x = j % 4
    y = j // 4
    img[x*SIZE:(x + 1)*SIZE, y*SIZE:(y+1)*SIZE] = grid[:,:,j]

img = (img + 1) * 127.5 
im = Image.fromarray(np.uint8(img))
im.save(os.path.basename(__file__) + '_layers.png')
